<!DOCTYPE html>
<html lang="en">
<head>
  <!-- -----------------------------------------------------------------------
       Basic metadata and page setup
  ------------------------------------------------------------------------ -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Green River College | LOC Chair — Learning Outcomes</title>

  <!-- Browser tab icon -->
  <link rel="icon" type="image/png" href="/images/logo.PNG" />

  <!-- -----------------------------------------------------------------------
       External libraries: jQuery + DataTables
       Used for advanced tables (Final View + Archives)
  ------------------------------------------------------------------------ -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/2.3.4/css/dataTables.dataTables.min.css" />
  <script src="https://cdn.datatables.net/2.3.4/js/dataTables.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.1/css/responsive.dataTables.min.css" />
  <script src="https://cdn.datatables.net/responsive/2.5.1/js/dataTables.responsive.min.js"></script>

  <!-- -----------------------------------------------------------------------
       Main application styles
       (Loaded in this order so override files apply correctly)
  ------------------------------------------------------------------------ -->
  <link rel="stylesheet" href="/styles.css" />
  <link rel="stylesheet" href="/left-panel/left-panel.css" />
  <link rel="stylesheet" href="/cards/cards.css" />
  <link rel="stylesheet" href="/right-panel/right-panel.css" />
  <link rel="stylesheet" href="/search/search.css" />
  <link rel="stylesheet" href="/view-archives/view-archives.css" />
  <link rel="stylesheet" href="/edit/edit.css" />
  <link rel="stylesheet" href="/hud/hud.css" />
</head>

<body>

  <!-- ======================================================================
       HEADER — Top navigation bar + global search
  ======================================================================= -->
  <header class="user-header">
    <div class="navbar">

      <!-- Brand name -->
      <div class="brand">
        <h1 class="brand__title">Green River College</h1>
      </div>

      <!-- Global search bar -->
      <div class="header-search">
        <input
          id="global-search"
          type="search"
          placeholder="Search divisions, programs, contacts..."
        />
      </div>

      <!-- Right-side page actions -->
      <div class="header-actions">
        <a class="btn btn--ghost" id="history-link" href="/history.html">History</a>
        <a class="btn btn--ghost" id="schedule-link" href="/schedule">Schedule</a>
        <button class="btn btn--accent" id="view-final-btn" type="button">View Final</button>
      </div>

    </div>
  </header>

  <!-- ======================================================================
       MAIN DASHBOARD LAYOUT
       Three-column structure:
       - Left: Division list
       - Middle: Cards + Editor + Archives
       - Right: Recent Changes panel
  ======================================================================= -->
  <main class="page-layout">

    <!-- -------------------------------------------------------------------
         LEFT PANEL — Division list (populated by left-panel.js)
    -------------------------------------------------------------------- -->
    <aside class="left-panel">
      <h2>Divisions</h2>

      <div class="lp-body">
        <ul class="division-list" id="division-list">
          <!-- Temporary placeholder until data loads -->
          <li class="division-item placeholder">Loading divisions…</li>
        </ul>
      </div>
    </aside>

    <!-- -------------------------------------------------------------------
         CENTER PANEL — Dashboard content
    -------------------------------------------------------------------- -->
    <section class="main-content" id="main-content">

      <!-- Page heading -->
      <h2>Dashboard</h2>

      <!-- ---------------------------------------------------------------
           Division cards grid (dashboard view)
           Filled by cards.js after divisions load
      ---------------------------------------------------------------- -->
      <div class="cards-wrap" id="cards-wrap">
        <div class="cards-grid" id="cards-grid">
          <div class="card placeholder">
            <span class="card-title">Loading divisions…</span>
          </div>
        </div>
      </div>

      <!-- ---------------------------------------------------------------
           DIVISION EDITOR (hidden until a division is selected)
           Filled by edit.js
      ---------------------------------------------------------------- -->
      <section id="division-detail" style="display:none; margin-top:14px;">
        <h2 class="edit-title">
          Edit Division
          <span class="badge" id="badgeName"></span>
        </h2>

        <!-- Hidden real division ID -->
        <input type="hidden" id="divisionId" />

        <!-- Main form fields -->
        <div class="edit-grid">

          <div class="edit-field">
            <label for="divisionName">Division Name</label>
            <input id="divisionName" type="text" placeholder="Division name" />
            <div class="error" data-error-for="divisionName"></div>
          </div>

          <div class="edit-field">
            <label for="deanInput">Dean</label>
            <input id="deanInput" type="text" placeholder="Dean name" />
            <div class="error" data-error-for="deanInput"></div>
          </div>

          <div class="edit-field">
            <label for="chairInput">Chair</label>
            <input id="chairInput" type="text" placeholder="Chair name" />
          </div>

          <div class="edit-field">
            <label for="programsInput">Programs (count)</label>
            <input
              id="programsInput"
              type="text"
              inputmode="numeric"
              placeholder="Number only"
            />
            <div class="hint">Whole number only</div>
            <div class="error" data-error-for="programsInput"></div>
          </div>

          <div class="edit-field full">
            <label for="notesInput">Notes</label>
            <textarea id="notesInput" rows="5" placeholder="Notes"></textarea>
          </div>
        </div>

        <!-- Editor buttons -->
        <div class="toolbar">
          <button class="btn btn-ghost" id="backToDashboard" type="button">Back</button>
          <button class="btn btn-danger" id="resetEdit" type="button" title="Clear unsaved local changes. Does not affect live data.">Clear Local</button>
          <button class="btn btn-primary" id="saveEdit" type="button">Save</button>
        </div>

        <!-- Program cards container -->
        <hr class="rule" />
        <div id="programsEditor"></div>
      </section>

      <!-- ---------------------------------------------------------------
           FINAL VIEW TABLE (DataTables)
           Hidden until user clicks "View Final"
      ---------------------------------------------------------------- -->
      <section id="final-view" style="display:none; margin-top:18px;">
        <h2>Finalized Data</h2>

        <table id="final-table" class="display" style="width:100%;">
          <thead>
            <tr>
              <th>Division</th>
              <th>Dean</th>
              <th>Chair</th>
              <th>Program</th>
              <th>Payees</th>
              <th>Paid</th>
              <th>Report</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>

      <!-- ---------------------------------------------------------------
           ARCHIVES DRAWER (Bottom section)
           Populated by view-archives.js
      ---------------------------------------------------------------- -->
      <section class="archives-section" id="archives-section">
        <div class="archives-head">
          <h2 class="archives-title">View Archives</h2>
          <button class="archives-toggle" id="archives-toggle">⮝</button>
        </div>

        <div class="archives-body" id="archives-body">
          <table class="archives-table" id="archives-table">
            <thead>
              <tr>
                <th>Year</th>
                <th>Changes</th>
                <th>Who</th>
                <th>Location</th>
                <th>View</th>
              </tr>
            </thead>
            <tbody id="archives-tbody">
              <tr><td colspan="5">Loading archives…</td></tr>
            </tbody>
          </table>
        </div>
      </section>

    </section>

    <!-- -------------------------------------------------------------------
         RIGHT PANEL — Recent submissions (populated by right-panel.js)
    -------------------------------------------------------------------- -->
    <aside class="right-panel" id="right-panel">
      <h2>Recent Changes</h2>
      <div class="rp-body">
        <ul class="change-list" id="recent-changes-list">
          <li class="placeholder">No recent changes yet.</li>
        </ul>
      </div>
    </aside>

    <!-- Toggle button for collapsing the right panel -->
    <button class="toggle-btn" id="toggle-right" aria-label="Toggle right panel">⮜</button>

  </main>

  <!-- ======================================================================
       GLOBAL SCRIPTS (order matters)
  ======================================================================= -->

  <!-- Search library -->
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.min.js"></script>

  <!-- App modules -->
  <script src="/search/search.js"></script>
  <script src="/left-panel/left-panel.js"></script>
  <script src="/cards/cards.js"></script>
  <script src="/view-archives/view-archives.js"></script>
  <script src="/right-panel/right-panel.js"></script>
  <script src="/script.js"></script>
  <script src="/edit/edit.js" defer></script>
  <script src="/hud/hud.js"></script>

</body>
</html>
